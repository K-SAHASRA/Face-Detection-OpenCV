<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <defs>
    <style>
      .title { font: 700 28px Arial, sans-serif; fill: #111827; }
      .label { font: 600 18px Arial, sans-serif; fill: #111827; }
      .small { font: 500 14px Arial, sans-serif; fill: #374151; }
      .box { fill: #f9fafb; stroke: #111827; stroke-width: 2; rx: 14; ry: 14; }
      .cloud { fill: #eef2ff; stroke: #1d4ed8; stroke-width: 2; rx: 14; ry: 14; }
      .local { fill: #ecfeff; stroke: #0e7490; stroke-width: 2; rx: 14; ry: 14; }
      .runtime { fill: #fff7ed; stroke: #ea580c; stroke-width: 2; rx: 14; ry: 14; }
      .arrow { stroke: #1f2937; stroke-width: 2.5; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1f2937" />
    </marker>
  </defs>

  <rect x="0" y="0" width="1200" height="700" fill="#ffffff" />
  <text x="40" y="52" class="title">Face Detection Attendance System Architecture</text>

  <rect class="box local" x="40" y="100" width="260" height="130" />
  <text x="60" y="140" class="label">Local Dataset</text>
  <text x="60" y="168" class="small">images/{id}.jpg</text>
  <text x="60" y="192" class="small">student face images</text>

  <rect class="box" x="360" y="85" width="320" height="160" />
  <text x="380" y="125" class="label">EncodeGenerator.py</text>
  <text x="380" y="153" class="small">- Reads local student images</text>
  <text x="380" y="177" class="small">- Uploads images to Firebase Storage</text>
  <text x="380" y="201" class="small">- Generates embeddings</text>
  <text x="380" y="225" class="small">- Writes encodeFile.p</text>

  <rect class="box local" x="740" y="110" width="210" height="110" />
  <text x="760" y="146" class="label">encodeFile.p</text>
  <text x="760" y="172" class="small">[encodings, ids]</text>

  <rect class="box cloud" x="980" y="70" width="180" height="140" />
  <text x="1000" y="108" class="label">Firebase</text>
  <text x="1000" y="136" class="small">Cloud Storage</text>
  <text x="1000" y="160" class="small">images/{id}.jpg</text>

  <rect class="box" x="360" y="285" width="320" height="140" />
  <text x="380" y="323" class="label">add-data-database.py</text>
  <text x="380" y="351" class="small">Seeds students/{id}</text>
  <text x="380" y="375" class="small">name, role, attendance fields</text>

  <rect class="box cloud" x="980" y="280" width="180" height="150" />
  <text x="1000" y="318" class="label">Firebase</text>
  <text x="1000" y="346" class="small">Realtime DB</text>
  <text x="1000" y="370" class="small">students/{id}</text>

  <rect class="box runtime" x="360" y="490" width="560" height="170" />
  <text x="380" y="530" class="label">main.py Runtime Loop</text>
  <text x="380" y="558" class="small">- Captures webcam frames</text>
  <text x="380" y="582" class="small">- Detects + matches faces with encodings</text>
  <text x="380" y="606" class="small">- Fetches student info + profile image from Firebase</text>
  <text x="380" y="630" class="small">- Updates attendance if cooldown elapsed</text>

  <rect class="box local" x="40" y="525" width="260" height="120" />
  <text x="60" y="562" class="label">Webcam + UI Assets</text>
  <text x="60" y="588" class="small">resources/background.png</text>
  <text x="60" y="612" class="small">resources/models/*.png</text>

  <line class="arrow" x1="300" y1="165" x2="360" y2="165" />
  <line class="arrow" x1="680" y1="165" x2="740" y2="165" />
  <line class="arrow" x1="680" y1="120" x2="980" y2="120" />
  <line class="arrow" x1="680" y1="355" x2="980" y2="355" />
  <line class="arrow" x1="850" y1="220" x2="850" y2="490" />
  <line class="arrow" x1="1040" y1="210" x2="1040" y2="490" />
  <line class="arrow" x1="1040" y1="430" x2="1040" y2="490" />
  <line class="arrow" x1="300" y1="585" x2="360" y2="585" />
</svg>
